!function(){var t={653:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},r.apply(this,arguments)},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(a,o){function i(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}c((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Router=void 0;var i=n(429),s=function(){function t(e){void 0===e&&(e="history");var n=this;this.listeners=[],this.previousPath=null,this.init=function(){"history"===n.mode?window.addEventListener("popstate",n.bindHandlePopState):"hash"===n.mode&&window.addEventListener("hashchange",n.bindHandleHashChange),document.body.addEventListener("click",n.bindHandleClick)},this.unsubscribeAll=function(){"history"===n.mode?window.removeEventListener("popstate",n.bindHandlePopState):"hash"===n.mode&&window.removeEventListener("hashchange",n.bindHandleHashChange),document.body.removeEventListener("click",n.bindHandleClick)},this.getPath=function(){return"hash"===n.mode?""===window.location.hash?"/":window.location.hash.slice(1):window.location.pathname+window.location.search},this.handleListener=function(e,i,s,c){var u=e.match,l=e.hooks;return void 0===s&&(s={}),void 0===c&&(c=!1),a(n,void 0,void 0,(function(){var e,n;return o(this,(function(a){switch(a.label){case 0:return e=r(r({},s),t.getQueryParams()),n={currentPath:i,previousPath:this.previousPath,state:e},c&&this.previousPath&&t.isMatch(u,this.previousPath)&&l.onLeave?[4,l.onLeave(n)]:[3,2];case 1:return a.sent(),[2];case 2:return t.isMatch(u,i)&&l.onBeforeEnter?[4,l.onBeforeEnter(n)]:[3,4];case 3:a.sent(),a.label=4;case 4:return t.isMatch(u,i)&&l.onEnter?[4,l.onEnter(n)]:[3,6];case 5:a.sent(),a.label=6;case 6:return[2]}}))}))},this.handleAllListeners=function(e,r,a){void 0===a&&(a={});var o=n.listeners.find((function(n){return t.isMatch(n.match,e)}));o&&n.handleListener(o,r,a,!0);var i=n.listeners.find((function(e){return t.isMatch(e.match,r)}));i&&n.handleListener(i,r,a)},this.on=function(t,e){void 0===e&&(e={});var r=(0,i.v4)(),a={id:r,match:t,hooks:e};return n.listeners.push(a),n.handleListener(a,n.currentPath),function(){n.listeners=n.listeners.filter((function(t){return t.id!==r}))}},this.go=function(t,e){void 0===e&&(e={}),n.previousPath=n.currentPath,"hash"===n.mode?window.location.hash=t:"history"===n.mode&&window.history.pushState(e,"",t),n.currentPath=n.getPath(),n.handleAllListeners(n.previousPath,n.currentPath,e)},this.handleClick=function(t){var e;if(t.target.matches("a")){t.preventDefault();var r=null!==(e=t.target.getAttribute("href"))&&void 0!==e?e:"";n.go(r)}},this.bindHandleClick=this.handleClick.bind(this),this.handlePopState=function(){n.previousPath=n.currentPath,n.currentPath=n.getPath(),n.handleAllListeners(n.previousPath,n.currentPath,{})},this.bindHandlePopState=this.handlePopState.bind(this),this.handleHashChange=function(){n.currentPath!==n.getPath()&&(n.previousPath=n.currentPath,n.currentPath=n.getPath(),n.handleAllListeners(n.previousPath,n.currentPath,{}))},this.bindHandleHashChange=this.handleHashChange.bind(this),this.mode=e,this.currentPath=this.getPath(),this.init()}return t.isMatch=function(t,e){return t instanceof RegExp&&t.test(e)||"function"==typeof t&&t(e)||"string"==typeof t&&t===e},t.getQueryParams=function(){var t=/\?(.+)$/.exec(window.location.href);return t?t[1].split("&").reduce((function(t,e){var n=e.split("="),r=n[0],a=n[1];return t[r]=a,t}),{}):{}},t}();e.Router=s},524:function(t){var e;t.exports=(e=function(){this.listeners={},this.registerListener=function(e,n,r){var a=e.constructor.name;r=this.validateNumber(r||"any"),"Array"!==a&&(e=[e]),e.forEach((function(e){if("String"!==e.constructor.name)throw new Error("Only `String` and array of `String` are accepted for the event names!");t.listeners[e]=t.listeners[e]||[],t.listeners[e].push({callback:n,number:r})}))},this.validateNumber=function(t){var e=t.constructor.name;if("Number"===e)return t;if("String"===e&&"any"===t.toLowerCase())return"any";throw new Error("Only `Number` and `any` are accepted in the number of possible executions!")},this.toBeRemoved=function(t){var e=t.number;return t.execution=t.execution||0,t.execution++,!("any"===e||t.execution<e)};var t=this;return{on:function(e,n){t.registerListener.bind(t)(e,n,"any")},once:function(e,n){t.registerListener.bind(t)(e,n,1)},exactly:function(e,n,r){t.registerListener.bind(t)(n,r,e)},die:function(e){delete t.listeners[e]},off:function(t){this.die(t)},detach:function(e,n){if(void 0===n)return t.listeners[e]=[],!0;for(var r in t.listeners[e])if(t.listeners[e].hasOwnProperty(r)&&t.listeners[e][r].callback===n)return t.listeners[e].splice(r,1),this.detach(e,n);return!0},detachAll:function(){for(var e in t.listeners)t.listeners.hasOwnProperty(e)&&this.detach(e)},emit:function(e,n){var r=[];for(var a in t.listeners)if(t.listeners.hasOwnProperty(a)&&(a===e&&Array.prototype.push.apply(r,t.listeners[a]),a.indexOf("*")>=0)){var o=a.replace(/\*\*/,"([^.]+.?)+");o=o.replace(/\*/g,"[^.]+");var i=e.match(o);i&&e===i[0]&&Array.prototype.push.apply(r,t.listeners[a])}var s=arguments;n=n||this,r.forEach((function(r,a){var o=r.callback;r.number,n&&(o=o.bind(n));var i=[];Object.keys(s).map((function(t){t>1&&i.push(s[t])})),t.toBeRemoved(r)&&t.listeners[e].splice(a,1),o.apply(null,i)}))}}},e),t.exports.default=t.exports},429:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return c.default}});var r=f(n(990)),a=f(n(237)),o=f(n(355)),i=f(n(764)),s=f(n(314)),c=f(n(464)),u=f(n(435)),l=f(n(8)),d=f(n(222));function f(t){return t&&t.__esModule?t:{default:t}}},163:function(t,e){"use strict";function n(t){return 14+(t+64>>>9<<4)+1}function r(t,e){const n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function a(t,e,n,a,o,i){return r((s=r(r(e,t),r(a,i)))<<(c=o)|s>>>32-c,n);var s,c}function o(t,e,n,r,o,i,s){return a(e&n|~e&r,t,e,o,i,s)}function i(t,e,n,r,o,i,s){return a(e&r|n&~r,t,e,o,i,s)}function s(t,e,n,r,o,i,s){return a(e^n^r,t,e,o,i,s)}function c(t,e,n,r,o,i,s){return a(n^(e|~r),t,e,o,i,s)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(t){if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return function(t){const e=[],n=32*t.length,r="0123456789abcdef";for(let a=0;a<n;a+=8){const n=t[a>>5]>>>a%32&255,o=parseInt(r.charAt(n>>>4&15)+r.charAt(15&n),16);e.push(o)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[n(e)-1]=e;let a=1732584193,u=-271733879,l=-1732584194,d=271733878;for(let e=0;e<t.length;e+=16){const n=a,f=u,h=l,p=d;a=o(a,u,l,d,t[e],7,-680876936),d=o(d,a,u,l,t[e+1],12,-389564586),l=o(l,d,a,u,t[e+2],17,606105819),u=o(u,l,d,a,t[e+3],22,-1044525330),a=o(a,u,l,d,t[e+4],7,-176418897),d=o(d,a,u,l,t[e+5],12,1200080426),l=o(l,d,a,u,t[e+6],17,-1473231341),u=o(u,l,d,a,t[e+7],22,-45705983),a=o(a,u,l,d,t[e+8],7,1770035416),d=o(d,a,u,l,t[e+9],12,-1958414417),l=o(l,d,a,u,t[e+10],17,-42063),u=o(u,l,d,a,t[e+11],22,-1990404162),a=o(a,u,l,d,t[e+12],7,1804603682),d=o(d,a,u,l,t[e+13],12,-40341101),l=o(l,d,a,u,t[e+14],17,-1502002290),u=o(u,l,d,a,t[e+15],22,1236535329),a=i(a,u,l,d,t[e+1],5,-165796510),d=i(d,a,u,l,t[e+6],9,-1069501632),l=i(l,d,a,u,t[e+11],14,643717713),u=i(u,l,d,a,t[e],20,-373897302),a=i(a,u,l,d,t[e+5],5,-701558691),d=i(d,a,u,l,t[e+10],9,38016083),l=i(l,d,a,u,t[e+15],14,-660478335),u=i(u,l,d,a,t[e+4],20,-405537848),a=i(a,u,l,d,t[e+9],5,568446438),d=i(d,a,u,l,t[e+14],9,-1019803690),l=i(l,d,a,u,t[e+3],14,-187363961),u=i(u,l,d,a,t[e+8],20,1163531501),a=i(a,u,l,d,t[e+13],5,-1444681467),d=i(d,a,u,l,t[e+2],9,-51403784),l=i(l,d,a,u,t[e+7],14,1735328473),u=i(u,l,d,a,t[e+12],20,-1926607734),a=s(a,u,l,d,t[e+5],4,-378558),d=s(d,a,u,l,t[e+8],11,-2022574463),l=s(l,d,a,u,t[e+11],16,1839030562),u=s(u,l,d,a,t[e+14],23,-35309556),a=s(a,u,l,d,t[e+1],4,-1530992060),d=s(d,a,u,l,t[e+4],11,1272893353),l=s(l,d,a,u,t[e+7],16,-155497632),u=s(u,l,d,a,t[e+10],23,-1094730640),a=s(a,u,l,d,t[e+13],4,681279174),d=s(d,a,u,l,t[e],11,-358537222),l=s(l,d,a,u,t[e+3],16,-722521979),u=s(u,l,d,a,t[e+6],23,76029189),a=s(a,u,l,d,t[e+9],4,-640364487),d=s(d,a,u,l,t[e+12],11,-421815835),l=s(l,d,a,u,t[e+15],16,530742520),u=s(u,l,d,a,t[e+2],23,-995338651),a=c(a,u,l,d,t[e],6,-198630844),d=c(d,a,u,l,t[e+7],10,1126891415),l=c(l,d,a,u,t[e+14],15,-1416354905),u=c(u,l,d,a,t[e+5],21,-57434055),a=c(a,u,l,d,t[e+12],6,1700485571),d=c(d,a,u,l,t[e+3],10,-1894986606),l=c(l,d,a,u,t[e+10],15,-1051523),u=c(u,l,d,a,t[e+1],21,-2054922799),a=c(a,u,l,d,t[e+8],6,1873313359),d=c(d,a,u,l,t[e+15],10,-30611744),l=c(l,d,a,u,t[e+6],15,-1560198380),u=c(u,l,d,a,t[e+13],21,1309151649),a=c(a,u,l,d,t[e+4],6,-145523070),d=c(d,a,u,l,t[e+11],10,-1120210379),l=c(l,d,a,u,t[e+2],15,718787259),u=c(u,l,d,a,t[e+9],21,-343485551),a=r(a,n),u=r(u,f),l=r(l,h),d=r(d,p)}return[a,u,l,d]}(function(t){if(0===t.length)return[];const e=8*t.length,r=new Uint32Array(n(e));for(let n=0;n<e;n+=8)r[n>>5]|=(255&t[n/8])<<n%32;return r}(t),8*t.length))}},790:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};e.default=n},314:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default="00000000-0000-0000-0000-000000000000"},222:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,a=(r=n(435))&&r.__esModule?r:{default:r};e.default=function(t){if(!(0,a.default)(t))throw TypeError("Invalid UUID");let e;const n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=255&e,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=255&e,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=255&e,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=255&e,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=255&e,n}},58:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},319:function(t,e){"use strict";let n;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)};const r=new Uint8Array(16)},757:function(t,e){"use strict";function n(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:case 3:return e^n^r;case 2:return e&n^e&r^n&r}}function r(t,e){return t<<e|t>>>32-e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(t){const e=[1518500249,1859775393,2400959708,3395469782],a=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const o=t.length/4+2,i=Math.ceil(o/16),s=new Array(i);for(let e=0;e<i;++e){const n=new Uint32Array(16);for(let r=0;r<16;++r)n[r]=t[64*e+4*r]<<24|t[64*e+4*r+1]<<16|t[64*e+4*r+2]<<8|t[64*e+4*r+3];s[e]=n}s[i-1][14]=8*(t.length-1)/Math.pow(2,32),s[i-1][14]=Math.floor(s[i-1][14]),s[i-1][15]=8*(t.length-1)&4294967295;for(let t=0;t<i;++t){const o=new Uint32Array(80);for(let e=0;e<16;++e)o[e]=s[t][e];for(let t=16;t<80;++t)o[t]=r(o[t-3]^o[t-8]^o[t-14]^o[t-16],1);let i=a[0],c=a[1],u=a[2],l=a[3],d=a[4];for(let t=0;t<80;++t){const a=Math.floor(t/20),s=r(i,5)+n(a,c,u,l)+d+e[a]+o[t]>>>0;d=l,l=u,u=r(c,30)>>>0,c=i,i=s}a[0]=a[0]+i>>>0,a[1]=a[1]+c>>>0,a[2]=a[2]+u>>>0,a[3]=a[3]+l>>>0,a[4]=a[4]+d>>>0}return[a[0]>>24&255,a[0]>>16&255,a[0]>>8&255,255&a[0],a[1]>>24&255,a[1]>>16&255,a[1]>>8&255,255&a[1],a[2]>>24&255,a[2]>>16&255,a[2]>>8&255,255&a[2],a[3]>>24&255,a[3]>>16&255,a[3]>>8&255,255&a[3],a[4]>>24&255,a[4]>>16&255,a[4]>>8&255,255&a[4]]}},8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.unsafeStringify=i;var r,a=(r=n(435))&&r.__esModule?r:{default:r};const o=[];for(let t=0;t<256;++t)o.push((t+256).toString(16).slice(1));function i(t,e=0){return(o[t[e+0]]+o[t[e+1]]+o[t[e+2]]+o[t[e+3]]+"-"+o[t[e+4]]+o[t[e+5]]+"-"+o[t[e+6]]+o[t[e+7]]+"-"+o[t[e+8]]+o[t[e+9]]+"-"+o[t[e+10]]+o[t[e+11]]+o[t[e+12]]+o[t[e+13]]+o[t[e+14]]+o[t[e+15]]).toLowerCase()}e.default=function(t,e=0){const n=i(t,e);if(!(0,a.default)(n))throw TypeError("Stringified UUID is invalid");return n}},990:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,a=(r=n(319))&&r.__esModule?r:{default:r},o=n(8);let i,s,c=0,u=0;e.default=function(t,e,n){let r=e&&n||0;const l=e||new Array(16);let d=(t=t||{}).node||i,f=void 0!==t.clockseq?t.clockseq:s;if(null==d||null==f){const e=t.random||(t.rng||a.default)();null==d&&(d=i=[1|e[0],e[1],e[2],e[3],e[4],e[5]]),null==f&&(f=s=16383&(e[6]<<8|e[7]))}let h=void 0!==t.msecs?t.msecs:Date.now(),p=void 0!==t.nsecs?t.nsecs:u+1;const y=h-c+(p-u)/1e4;if(y<0&&void 0===t.clockseq&&(f=f+1&16383),(y<0||h>c)&&void 0===t.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=h,u=p,s=f,h+=122192928e5;const v=(1e4*(268435455&h)+p)%4294967296;l[r++]=v>>>24&255,l[r++]=v>>>16&255,l[r++]=v>>>8&255,l[r++]=255&v;const b=h/4294967296*1e4&268435455;l[r++]=b>>>8&255,l[r++]=255&b,l[r++]=b>>>24&15|16,l[r++]=b>>>16&255,l[r++]=f>>>8|128,l[r++]=255&f;for(let t=0;t<6;++t)l[r+t]=d[t];return e||(0,o.unsafeStringify)(l)}},237:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(925)),a=o(n(163));function o(t){return t&&t.__esModule?t:{default:t}}var i=(0,r.default)("v3",48,a.default);e.default=i},925:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.URL=e.DNS=void 0,e.default=function(t,e,n){function r(t,r,i,s){var c;if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));const e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}(t)),"string"==typeof r&&(r=(0,o.default)(r)),16!==(null===(c=r)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+t.length);if(u.set(r),u.set(t,r.length),u=n(u),u[6]=15&u[6]|e,u[8]=63&u[8]|128,i){s=s||0;for(let t=0;t<16;++t)i[s+t]=u[t];return i}return(0,a.unsafeStringify)(u)}try{r.name=t}catch(t){}return r.DNS=i,r.URL=s,r};var r,a=n(8),o=(r=n(222))&&r.__esModule?r:{default:r};const i="6ba7b810-9dad-11d1-80b4-00c04fd430c8";e.DNS=i;const s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";e.URL=s},355:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n(790)),a=i(n(319)),o=n(8);function i(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e,n){if(r.default.randomUUID&&!e&&!t)return r.default.randomUUID();const i=(t=t||{}).random||(t.rng||a.default)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=i[t];return e}return(0,o.unsafeStringify)(i)}},764:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(925)),a=o(n(757));function o(t){return t&&t.__esModule?t:{default:t}}var i=(0,r.default)("v5",80,a.default);e.default=i},435:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,a=(r=n(58))&&r.__esModule?r:{default:r};e.default=function(t){return"string"==typeof t&&a.default.test(t)}},464:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,a=(r=n(435))&&r.__esModule?r:{default:r};e.default=function(t){if(!(0,a.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/otus--homework--19/",function(){"use strict";var t=n(653);class e{static getDescendantProperty(t,n,r=[]){let a,o,i,s,c,u;if(n){if(i=n.indexOf("."),-1===i?a=n:(a=n.slice(0,i),o=n.slice(i+1)),s=t[a],null!=s)if(o||"string"!=typeof s&&"number"!=typeof s)if("[object Array]"===Object.prototype.toString.call(s))for(c=0,u=s.length;c<u;c++)e.getDescendantProperty(s[c],o,r);else o&&e.getDescendantProperty(s,o,r);else r.push(s)}else r.push(t);return r}}class r{constructor(t=[],e=[],n={}){Array.isArray(e)||(n=e,e=[]),this.haystack=t,this.keys=e,this.options=Object.assign({caseSensitive:!1,sort:!1},n)}search(t=""){if(""===t)return this.haystack;const n=[];for(let a=0;a<this.haystack.length;a++){const o=this.haystack[a];if(0===this.keys.length){const e=r.isMatch(o,t,this.options.caseSensitive);e&&n.push({item:o,score:e})}else for(let a=0;a<this.keys.length;a++){const i=e.getDescendantProperty(o,this.keys[a]);let s=!1;for(let e=0;e<i.length;e++){const a=r.isMatch(i[e],t,this.options.caseSensitive);if(a){s=!0,n.push({item:o,score:a});break}}if(s)break}}return this.options.sort&&n.sort(((t,e)=>t.score-e.score)),n.map((t=>t.item))}static isMatch(t,e,n){t=String(t),e=String(e),n||(t=t.toLocaleLowerCase(),e=e.toLocaleLowerCase());const a=r.nearestIndexesFor(t,e);return!!a&&(t===e?1:a.length>1?a[a.length-1]-a[0]+2:2+a[0])}static nearestIndexesFor(t,e){const n=e.split("");let a=[];return r.indexesOfFirstLetter(t,e).forEach(((e,r)=>{let o=e+1;a[r]=[e];for(let e=1;e<n.length;e++){const i=n[e];if(o=t.indexOf(i,o),-1===o){a[r]=!1;break}a[r].push(o),o++}})),a=a.filter((t=>!1!==t)),!!a.length&&a.sort(((t,e)=>1===t.length?t[0]-e[0]:(t=t[t.length-1]-t[0])-(e=e[e.length-1]-e[0])))[0]}static indexesOfFirstLetter(t,e){const n=e[0];return t.split("").map(((t,e)=>t===n&&e)).filter((t=>!1!==t))}}var a=n(524),o=n.n(a);class i{state={};events={};constructor(t,e){this.el=t,e&&(this.state={...this.state,...e}),this.onMount()}setState=t=>{this.state={...this.state,...t},this.el.innerHTML=this.render(),this.subscribeToEvents()};subscribeToEvents(){for(const t in this.events)if(Object.prototype.hasOwnProperty.call(this.events,t)){const[e,n]=t.split("@");[...this.el.querySelectorAll(`${n}`)].forEach((n=>{n.addEventListener(`${e}`,this.events[t].bind(this),!0)}))}}onMount=()=>{this.el.innerHTML=this.render(),setTimeout((()=>{this.subscribeToEvents()}),0)}}class s extends i{constructor(...t){super(...t),this.state.eventBus.once("initialLoad",(()=>{this.setState({})}))}render(){return'\n    <header class="header" ></header>\n    <main class="main _container" ></main>    \n  '}}class c extends i{constructor(...t){super(...t),this.state.eventBus.once("initialLoad",(()=>{this.setState({})}))}render(){return'\n      <div class="welcome">\n         <h1 >Welcome!</h1>\n         <h2>Use the links at the top of the app for further work.</h2>\n      </div>'}}const u=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],l=["january","february","march","april","may","june","july","august","september","october","november","december"];function d(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function f(t){return!!t&&!!t[Q]}function h(t){var e;return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Z}(t)||Array.isArray(t)||!!t[J]||!!(null===(e=t.constructor)||void 0===e?void 0:e[J])||g(t)||_(t))}function p(t,e,n){void 0===n&&(n=!1),0===y(t)?(n?Object.keys:tt)(t).forEach((function(r){n&&"symbol"==typeof r||e(r,t[r],t)})):t.forEach((function(n,r){return e(r,n,t)}))}function y(t){var e=t[Q];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:g(t)?2:_(t)?3:0}function v(t,e){return 2===y(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function b(t,e,n){var r=y(t);2===r?t.set(e,n):3===r?t.add(n):t[e]=n}function m(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function g(t){return W&&t instanceof Map}function _(t){return K&&t instanceof Set}function w(t){return t.o||t.t}function k(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=et(t);delete e[Q];for(var n=tt(e),r=0;r<n.length;r++){var a=n[r],o=e[a];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[a]})}return Object.create(Object.getPrototypeOf(t),e)}function O(t,e){return void 0===e&&(e=!1),P(t)||f(t)||!h(t)||(y(t)>1&&(t.set=t.add=t.clear=t.delete=S),Object.freeze(t),e&&p(t,(function(t,e){return O(e,!0)}),!0)),t}function S(){d(2)}function P(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function j(t){var e=nt[t];return e||d(18,t),e}function E(){return Y}function x(t,e){e&&(j("Patches"),t.u=[],t.s=[],t.v=e)}function I(t){A(t),t.p.forEach(M),t.p=null}function A(t){t===Y&&(Y=t.l)}function T(t){return Y={p:[],l:Y,h:t,m:!0,_:0}}function M(t){var e=t[Q];0===e.i||1===e.i?e.j():e.g=!0}function $(t,e){e._=e.p.length;var n=e.p[0],r=void 0!==t&&t!==n;return e.h.O||j("ES5").S(e,t,r),r?(n[Q].P&&(I(e),d(4)),h(t)&&(t=D(e,t),e.l||L(e,t)),e.u&&j("Patches").M(n[Q].t,t,e.u,e.s)):t=D(e,n,[]),I(e),e.u&&e.v(e.u,e.s),t!==G?t:void 0}function D(t,e,n){if(P(e))return e;var r=e[Q];if(!r)return p(e,(function(a,o){return C(t,r,e,a,o,n)}),!0),e;if(r.A!==t)return e;if(!r.P)return L(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var a=4===r.i||5===r.i?r.o=k(r.k):r.o,o=a,i=!1;3===r.i&&(o=new Set(a),a.clear(),i=!0),p(o,(function(e,o){return C(t,r,a,e,o,n,i)})),L(t,a,!1),n&&t.u&&j("Patches").N(r,n,t.u,t.s)}return r.o}function C(t,e,n,r,a,o,i){if(f(a)){var s=D(t,a,o&&e&&3!==e.i&&!v(e.R,r)?o.concat(r):void 0);if(b(n,r,s),!f(s))return;t.m=!1}else i&&n.add(a);if(h(a)&&!P(a)){if(!t.h.D&&t._<1)return;D(t,a),e&&e.A.l||L(t,a)}}function L(t,e,n){void 0===n&&(n=!1),!t.l&&t.h.D&&t.m&&O(e,n)}function N(t,e){var n=t[Q];return(n?w(n):t)[e]}function U(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function R(t){t.P||(t.P=!0,t.l&&R(t.l))}function F(t){t.o||(t.o=k(t.t))}function q(t,e,n){var r=g(e)?j("MapSet").F(e,n):_(e)?j("MapSet").T(e,n):t.O?function(t,e){var n=Array.isArray(t),r={i:n?1:0,A:e?e.A:E(),P:!1,I:!1,R:{},l:e,t,k:null,o:null,j:null,C:!1},a=r,o=rt;n&&(a=[r],o=at);var i=Proxy.revocable(a,o),s=i.revoke,c=i.proxy;return r.k=c,r.j=s,c}(e,n):j("ES5").J(e,n);return(n?n.A:E()).p.push(r),r}function B(t){return f(t)||d(22,t),function t(e){if(!h(e))return e;var n,r=e[Q],a=y(e);if(r){if(!r.P&&(r.i<4||!j("ES5").K(r)))return r.t;r.I=!0,n=H(e,a),r.I=!1}else n=H(e,a);return p(n,(function(e,a){r&&function(t,e){return 2===y(t)?t.get(e):t[e]}(r.t,e)===a||b(n,e,t(a))})),3===a?new Set(n):n}(t)}function H(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return k(t)}var V,Y,z="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),W="undefined"!=typeof Map,K="undefined"!=typeof Set,X="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,G=z?Symbol.for("immer-nothing"):((V={})["immer-nothing"]=!0,V),J=z?Symbol.for("immer-draftable"):"__$immer_draftable",Q=z?Symbol.for("immer-state"):"__$immer_state",Z=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),tt="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,et=Object.getOwnPropertyDescriptors||function(t){var e={};return tt(t).forEach((function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)})),e},nt={},rt={get:function(t,e){if(e===Q)return t;var n=w(t);if(!v(n,e))return function(t,e,n){var r,a=U(e,n);return a?"value"in a?a.value:null===(r=a.get)||void 0===r?void 0:r.call(t.k):void 0}(t,n,e);var r=n[e];return t.I||!h(r)?r:r===N(t.t,e)?(F(t),t.o[e]=q(t.A.h,r,t)):r},has:function(t,e){return e in w(t)},ownKeys:function(t){return Reflect.ownKeys(w(t))},set:function(t,e,n){var r=U(w(t),e);if(null==r?void 0:r.set)return r.set.call(t.k,n),!0;if(!t.P){var a=N(w(t),e),o=null==a?void 0:a[Q];if(o&&o.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(m(n,a)&&(void 0!==n||v(t.t,e)))return!0;F(t),R(t)}return t.o[e]===n&&(void 0!==n||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return void 0!==N(t.t,e)||e in t.t?(t.R[e]=!1,F(t),R(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=w(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:r.enumerable,value:n[e]}:r},defineProperty:function(){d(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){d(12)}},at={};p(rt,(function(t,e){at[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),at.deleteProperty=function(t,e){return at.set.call(this,t,e,void 0)},at.set=function(t,e,n){return rt.set.call(this,t[0],e,n,t[0])};var ot=function(){function t(t){var e=this;this.O=X,this.D=!0,this.produce=function(t,n,r){if("function"==typeof t&&"function"!=typeof n){var a=n;n=t;var o=e;return function(t){var e=this;void 0===t&&(t=a);for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return o.produce(t,(function(t){var r;return(r=n).call.apply(r,[e,t].concat(i))}))}}var i;if("function"!=typeof n&&d(6),void 0!==r&&"function"!=typeof r&&d(7),h(t)){var s=T(e),c=q(e,t,void 0),u=!0;try{i=n(c),u=!1}finally{u?I(s):A(s)}return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(t){return x(s,r),$(t,s)}),(function(t){throw I(s),t})):(x(s,r),$(i,s))}if(!t||"object"!=typeof t){if(void 0===(i=n(t))&&(i=t),i===G&&(i=void 0),e.D&&O(i,!0),r){var l=[],f=[];j("Patches").M(t,i,l,f),r(l,f)}return i}d(21,t)},this.produceWithPatches=function(t,n){if("function"==typeof t)return function(n){for(var r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return e.produceWithPatches(n,(function(e){return t.apply(void 0,[e].concat(a))}))};var r,a,o=e.produce(t,n,(function(t,e){r=t,a=e}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(t){return[t,r,a]})):[o,r,a]},"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze)}var e=t.prototype;return e.createDraft=function(t){h(t)||d(8),f(t)&&(t=B(t));var e=T(this),n=q(this,t,void 0);return n[Q].C=!0,A(e),n},e.finishDraft=function(t,e){var n=(t&&t[Q]).A;return x(n,e),$(void 0,n)},e.setAutoFreeze=function(t){this.D=t},e.setUseProxies=function(t){t&&!X&&d(20),this.O=t},e.applyPatches=function(t,e){var n;for(n=e.length-1;n>=0;n--){var r=e[n];if(0===r.path.length&&"replace"===r.op){t=r.value;break}}n>-1&&(e=e.slice(n+1));var a=j("Patches").$;return f(t)?a(t,e):this.produce(t,(function(t){return a(t,e)}))},t}(),it=new ot,st=it.produce;it.produceWithPatches.bind(it),it.setAutoFreeze.bind(it),it.setUseProxies.bind(it),it.applyPatches.bind(it),it.createDraft.bind(it),it.finishDraft.bind(it);const ct=st;function ut(t){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ut(t)}function lt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==ut(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ut(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ut(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ft(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dt(Object(n),!0).forEach((function(e){lt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ht(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var pt="function"==typeof Symbol&&Symbol.observable||"@@observable",yt=function(){return Math.random().toString(36).substring(7).split("").join(".")},vt={INIT:"@@redux/INIT"+yt(),REPLACE:"@@redux/REPLACE"+yt(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+yt()}};function bt(t,e,n){var r;if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(ht(0));if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error(ht(1));return n(bt)(t,e)}if("function"!=typeof t)throw new Error(ht(2));var a=t,o=e,i=[],s=i,c=!1;function u(){s===i&&(s=i.slice())}function l(){if(c)throw new Error(ht(3));return o}function d(t){if("function"!=typeof t)throw new Error(ht(4));if(c)throw new Error(ht(5));var e=!0;return u(),s.push(t),function(){if(e){if(c)throw new Error(ht(6));e=!1,u();var n=s.indexOf(t);s.splice(n,1),i=null}}}function f(t){if(!function(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}(t))throw new Error(ht(7));if(void 0===t.type)throw new Error(ht(8));if(c)throw new Error(ht(9));try{c=!0,o=a(o,t)}finally{c=!1}for(var e=i=s,n=0;n<e.length;n++)(0,e[n])();return t}return f({type:vt.INIT}),(r={dispatch:f,subscribe:d,getState:l,replaceReducer:function(t){if("function"!=typeof t)throw new Error(ht(10));a=t,f({type:vt.REPLACE})}})[pt]=function(){var t,e=d;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new Error(ht(11));function n(){t.next&&t.next(l())}return n(),{unsubscribe:e(n)}}})[pt]=function(){return this},t},r}function mt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function gt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),r=function(){throw new Error(ht(15))},a={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=e.map((function(t){return t(a)}));return r=mt.apply(void 0,o)(n.dispatch),ft(ft({},n),{},{dispatch:r})}}}function _t(t){return function(e){var n=e.dispatch,r=e.getState;return function(e){return function(a){return"function"==typeof a?a(n,r,t):e(a)}}}}var wt=_t();wt.withExtraArgument=_t;const kt=wt;var Ot,St=(Ot=function(t,e){return Ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Ot(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Ot(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Pt=function(t,e){for(var n=0,r=e.length,a=t.length;n<r;n++,a++)t[a]=e[n];return t},jt=Object.defineProperty,Et=Object.defineProperties,xt=Object.getOwnPropertyDescriptors,It=Object.getOwnPropertySymbols,At=Object.prototype.hasOwnProperty,Tt=Object.prototype.propertyIsEnumerable,Mt=function(t,e,n){return e in t?jt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},$t=function(t,e){for(var n in e||(e={}))At.call(e,n)&&Mt(t,n,e[n]);if(It)for(var r=0,a=It(e);r<a.length;r++)n=a[r],Tt.call(e,n)&&Mt(t,n,e[n]);return t},Dt=function(t,e){return Et(t,xt(e))},Ct="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?mt:mt.apply(null,arguments)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var Lt=function(t){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var a=t.apply(this,n)||this;return Object.setPrototypeOf(a,e.prototype),a}return St(e,t),Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.prototype.concat.apply(this,e)},e.prototype.prepend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])?new(e.bind.apply(e,Pt([void 0],t[0].concat(this)))):new(e.bind.apply(e,Pt([void 0],t.concat(this))))},e}(Array),Nt=function(t){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var a=t.apply(this,n)||this;return Object.setPrototypeOf(a,e.prototype),a}return St(e,t),Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.prototype.concat.apply(this,e)},e.prototype.prepend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])?new(e.bind.apply(e,Pt([void 0],t[0].concat(this)))):new(e.bind.apply(e,Pt([void 0],t.concat(this))))},e}(Array);function Ut(t){return h(t)?ct(t,(function(){})):t}function Rt(t,e){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(e){var a=e.apply(void 0,n);if(!a)throw new Error("prepareAction did not return an object");return $t($t({type:t,payload:a.payload},"meta"in a&&{meta:a.meta}),"error"in a&&{error:a.error})}return{type:t,payload:n[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(e){return e.type===t},n}function Ft(t){var e,n={},r=[],a={addCase:function(t,e){var r="string"==typeof t?t:t.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=e,a},addMatcher:function(t,e){return r.push({matcher:t,reducer:e}),a},addDefaultCase:function(t){return e=t,a}};return t(a),[n,r,e]}function qt(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof t.initialState?t.initialState:Ut(t.initialState),a=t.reducers||{},o=Object.keys(a),i={},s={},c={};function u(){var e="function"==typeof t.extraReducers?Ft(t.extraReducers):[t.extraReducers],n=e[0],a=void 0===n?{}:n,o=e[1],i=void 0===o?[]:o,c=e[2],u=void 0===c?void 0:c,l=$t($t({},a),s);return function(t,e,n,r){void 0===n&&(n=[]);var a,o=Ft(e),i=o[0],s=o[1],c=o[2];if(function(t){return"function"==typeof t}(t))a=function(){return Ut(t())};else{var u=Ut(t);a=function(){return u}}function l(t,e){void 0===t&&(t=a());var n=Pt([i[e.type]],s.filter((function(t){return(0,t.matcher)(e)})).map((function(t){return t.reducer})));return 0===n.filter((function(t){return!!t})).length&&(n=[c]),n.reduce((function(t,n){if(n){var r;if(f(t))return void 0===(r=n(t,e))?t:r;if(h(t))return ct(t,(function(t){return n(t,e)}));if(void 0===(r=n(t,e))){if(null===t)return t;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return t}),t)}return l.getInitialState=a,l}(r,(function(t){for(var e in l)t.addCase(e,l[e]);for(var n=0,r=i;n<r.length;n++){var a=r[n];t.addMatcher(a.matcher,a.reducer)}u&&t.addDefaultCase(u)}))}return o.forEach((function(t){var n,r,o=a[t],u=e+"/"+t;"reducer"in o?(n=o.reducer,r=o.prepare):n=o,i[t]=n,s[u]=n,c[t]=r?Rt(u,r):Rt(u)})),{name:e,reducer:function(t,e){return n||(n=u()),n(t,e)},actions:c,caseReducers:i,getInitialState:function(){return n||(n=u()),n.getInitialState()}}}var Bt=["name","message","stack","code"],Ht=function(t,e){this.payload=t,this.meta=e},Vt=function(t,e){this.payload=t,this.meta=e},Yt=function(t){if("object"==typeof t&&null!==t){for(var e={},n=0,r=Bt;n<r.length;n++){var a=r[n];"string"==typeof t[a]&&(e[a]=t[a])}return e}return{message:String(t)}};function zt(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}!function(){function t(t,e,n){var r=Rt(t+"/fulfilled",(function(t,e,n,r){return{payload:t,meta:Dt($t({},r||{}),{arg:n,requestId:e,requestStatus:"fulfilled"})}})),a=Rt(t+"/pending",(function(t,e,n){return{payload:void 0,meta:Dt($t({},n||{}),{arg:e,requestId:t,requestStatus:"pending"})}})),o=Rt(t+"/rejected",(function(t,e,r,a,o){return{payload:a,error:(n&&n.serializeError||Yt)(t||"Rejected"),meta:Dt($t({},o||{}),{arg:r,requestId:e,rejectedWithValue:!!a,requestStatus:"rejected",aborted:"AbortError"===(null==t?void 0:t.name),condition:"ConditionError"===(null==t?void 0:t.name)})}})),i="undefined"!=typeof AbortController?AbortController:function(){function t(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return t.prototype.abort=function(){},t}();return Object.assign((function(t){return function(s,c,u){var l,d=(null==n?void 0:n.idGenerator)?n.idGenerator(t):function(t){void 0===t&&(t=21);for(var e="",n=t;n--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e}(),f=new i;function h(t){l=t,f.abort()}var p=function(){return i=this,p=null,y=function(){var i,p,y,v,b,m;return function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(t){o=[6,t],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(g){switch(g.label){case 0:return g.trys.push([0,4,,5]),null===(_=v=null==(i=null==n?void 0:n.condition)?void 0:i.call(n,t,{getState:c,extra:u}))||"object"!=typeof _||"function"!=typeof _.then?[3,2]:[4,v];case 1:v=g.sent(),g.label=2;case 2:if(!1===v||f.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return b=new Promise((function(t,e){return f.signal.addEventListener("abort",(function(){return e({name:"AbortError",message:l||"Aborted"})}))})),s(a(d,t,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:d,arg:t},{getState:c,extra:u}))),[4,Promise.race([b,Promise.resolve(e(t,{dispatch:s,getState:c,extra:u,requestId:d,signal:f.signal,abort:h,rejectWithValue:function(t,e){return new Ht(t,e)},fulfillWithValue:function(t,e){return new Vt(t,e)}})).then((function(e){if(e instanceof Ht)throw e;return e instanceof Vt?r(e.payload,d,t,e.meta):r(e,d,t)}))])];case 3:return y=g.sent(),[3,5];case 4:return m=g.sent(),y=m instanceof Ht?o(null,d,t,m.payload,m.meta):o(m,d,t),[3,5];case 5:return n&&!n.dispatchConditionRejection&&o.match(y)&&y.meta.condition||s(y),[2,y]}var _}))},new Promise((function(t,e){var n=function(t){try{a(y.next(t))}catch(t){e(t)}},r=function(t){try{a(y.throw(t))}catch(t){e(t)}},a=function(e){return e.done?t(e.value):Promise.resolve(e.value).then(n,r)};a((y=y.apply(i,p)).next())}));var i,p,y}();return Object.assign(p,{abort:h,requestId:d,arg:t,unwrap:function(){return p.then(zt)}})}}),{pending:a,rejected:o,fulfilled:r,typePrefix:t})}t.withTypes=function(){return t}}(),Object.assign;var Wt="listenerMiddleware";Rt(Wt+"/add"),Rt(Wt+"/removeAll"),Rt(Wt+"/remove"),"function"==typeof queueMicrotask&&queueMicrotask.bind("undefined"!=typeof window?window:void 0!==n.g?n.g:globalThis);function Kt(t,e){let n,r,a,o;return e?(n=new Date(Number(e.year),Number(e.month),1),r=Number(e.month),a=Number(e.year),o=Number(e.day)):(n=new Date(t.getFullYear(),t.getMonth(),1),r=t.getMonth(),a=t.getFullYear(),o=t.getDate()),{firstNumberOfMonth:n,month:r,year:a,day:o}}function Xt(t){return t<10?`0${String(t)}`:String(t)}function Gt(t,e){const n=[...e];let r,a=0,o=n.length,i=!1;if(0===o)return n.push(t),n;if(new Date(t.dateOfExecution).getTime()>new Date(n[o-1].dateOfExecution).getTime())return n.push(t),n;if(new Date(t.dateOfExecution).getTime()<new Date(n[0].dateOfExecution).getTime())return n.splice(a,0,t),n;for(;!1===i;)r=~~((a+o)/2),new Date(t.dateOfExecution).getTime()>new Date(n[r].dateOfExecution).getTime()?a=r:o=r,o-a<=1&&(n.splice(o,0,t),i=!0);return n}"undefined"!=typeof window&&window.requestAnimationFrame&&window.requestAnimationFrame,function(){function t(t,e){var n=a[t];return n?n.enumerable=e:a[t]=n={configurable:!0,enumerable:e,get:function(){var e=this[Q];return rt.get(e,t)},set:function(e){var n=this[Q];rt.set(n,t,e)}},n}function e(t){for(var e=t.length-1;e>=0;e--){var a=t[e][Q];if(!a.P)switch(a.i){case 5:r(a)&&R(a);break;case 4:n(a)&&R(a)}}}function n(t){for(var e=t.t,n=t.k,r=tt(n),a=r.length-1;a>=0;a--){var o=r[a];if(o!==Q){var i=e[o];if(void 0===i&&!v(e,o))return!0;var s=n[o],c=s&&s[Q];if(c?c.t!==i:!m(s,i))return!0}}var u=!!e[Q];return r.length!==tt(e).length+(u?0:1)}function r(t){var e=t.k;if(e.length!==t.t.length)return!0;var n=Object.getOwnPropertyDescriptor(e,e.length-1);if(n&&!n.get)return!0;for(var r=0;r<e.length;r++)if(!e.hasOwnProperty(r))return!0;return!1}var a={};!function(t,e){nt[t]||(nt[t]=e)}("ES5",{J:function(e,n){var r=Array.isArray(e),a=function(e,n){if(e){for(var r=Array(n.length),a=0;a<n.length;a++)Object.defineProperty(r,""+a,t(a,!0));return r}var o=et(n);delete o[Q];for(var i=tt(o),s=0;s<i.length;s++){var c=i[s];o[c]=t(c,e||!!o[c].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,e),o={i:r?5:4,A:n?n.A:E(),P:!1,I:!1,R:{},l:n,t:e,k:a,o:null,g:!1,C:!1};return Object.defineProperty(a,Q,{value:o,writable:!0}),a},S:function(t,n,a){a?f(n)&&n[Q].A===t&&e(t.p):(t.u&&function t(e){if(e&&"object"==typeof e){var n=e[Q];if(n){var a=n.t,o=n.k,i=n.R,s=n.i;if(4===s)p(o,(function(e){e!==Q&&(void 0!==a[e]||v(a,e)?i[e]||t(o[e]):(i[e]=!0,R(n)))})),p(a,(function(t){void 0!==o[t]||v(o,t)||(i[t]=!1,R(n))}));else if(5===s){if(r(n)&&(R(n),i.length=!0),o.length<a.length)for(var c=o.length;c<a.length;c++)i[c]=!1;else for(var u=a.length;u<o.length;u++)i[u]=!0;for(var l=Math.min(o.length,a.length),d=0;d<l;d++)o.hasOwnProperty(d)||(i[d]=!0),void 0===i[d]&&t(o[d])}}}}(t.p[0]),e(t.p))},K:function(t){return 4===t.i?n(t):r(t)}})}();const Jt=qt({name:"tasks",initialState:[],reducers:{unloadTasksFromLS:(t,e)=>e.payload,addTask:(t,e)=>Gt(e.payload,t),updateTask:(t,e)=>t.map((t=>{if(t.id===e.payload.id){const n={...t};return"string"==typeof e.payload.data?n.text=e.payload.data:n.status=e.payload.data,n}return t})),deleteTask:(t,e)=>t.filter((t=>t.id!==e.payload))}}),{addTask:Qt,updateTask:Zt,deleteTask:te,unloadTasksFromLS:ee}=Jt.actions,ne=Jt.reducer,re=qt({name:"completed",initialState:!1,reducers:{toggle:t=>!t}}),{toggle:ae}=re.actions,oe=re.reducer,ie=qt({name:"search",initialState:{flag:!1,value:"",findTasks:[],currentTasks:[]},reducers:{addCurrentTasks:(t,e)=>(t.currentTasks=e.payload,t),updateSearch:(t,e)=>(t.flag=e.payload.flag,t.value=e.payload.value,t.findTasks=e.payload.tasks,t),deleteTaskBySearch:(t,e)=>(t.findTasks=t.findTasks.filter((t=>t.id!==e.payload)),t.currentTasks=t.currentTasks.filter((t=>t.id!==e.payload)),t),clearSearch:t=>({flag:!1,value:"",findTasks:[],currentTasks:[]})}}),{updateSearch:se,clearSearch:ce,addCurrentTasks:ue,deleteTaskBySearch:le}=ie.actions,de=function(t){var e,n=function(t){return function(t){void 0===t&&(t={});var e=t.thunk,n=void 0===e||e,r=(t.immutableCheck,t.serializableCheck,new Lt);return n&&(function(t){return"boolean"==typeof t}(n)?r.push(kt):r.push(kt.withExtraArgument(n.extraArgument))),r}(t)},r=t||{},a=r.reducer,o=void 0===a?void 0:a,i=r.middleware,s=void 0===i?n():i,c=r.devTools,u=void 0===c||c,l=r.preloadedState,d=void 0===l?void 0:l,f=r.enhancers,h=void 0===f?void 0:f;if("function"==typeof o)e=o;else{if(!function(t){if("object"!=typeof t||null===t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return e===n}(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');e=function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var a=e[r];"function"==typeof t[a]&&(n[a]=t[a])}var o,i=Object.keys(n);try{!function(t){Object.keys(t).forEach((function(e){var n=t[e];if(void 0===n(void 0,{type:vt.INIT}))throw new Error(ht(12));if(void 0===n(void 0,{type:vt.PROBE_UNKNOWN_ACTION()}))throw new Error(ht(13))}))}(n)}catch(t){o=t}return function(t,e){if(void 0===t&&(t={}),o)throw o;for(var r=!1,a={},s=0;s<i.length;s++){var c=i[s],u=n[c],l=t[c],d=u(l,e);if(void 0===d)throw e&&e.type,new Error(ht(14));a[c]=d,r=r||d!==l}return(r=r||i.length!==Object.keys(t).length)?a:t}}(o)}var p=s;"function"==typeof p&&(p=p(n));var y=gt.apply(void 0,p),v=mt;u&&(v=Ct($t({trace:!1},"object"==typeof u&&u)));var b=new Nt(y),m=b;return Array.isArray(h)?m=Pt([y],h):"function"==typeof h&&(m=h(b)),bt(e,d,v.apply(void 0,m))}({reducer:{tasks:ne,completed:oe,search:ie.reducer}}),fe=t=>t.tasks.filter((e=>!t.completed||e.status===t.completed));class he extends i{constructor(...t){super(...t),this.state.eventBus.once("initialLoad",(()=>{this.setState({tasks:de.getState().tasks})}))}handleClickShowCompleted=async()=>{de.dispatch(ae()),this.setState({tasks:fe(de.getState()),completed:de.getState().completed})};events={"click@.checkbox-completed__input":this.handleClickShowCompleted};render(){const t={};this.state.tasks.forEach((e=>{const n=new Date(e.dateOfExecution);this.state.dateInfo.month===n.getMonth()&&this.state.dateInfo.year===n.getFullYear()&&(t[`${String(n.getFullYear())}/${String(n.getMonth())}/${String(n.getDate())}`]=!0)}));let e=this.state.dateInfo.firstNumberOfMonth.getDay();0===e&&(e=7);const n=[];let r=0;for(let a=0;a<6;a+=1){let o=[],i=1;o=0===a?[...Array(7)].map(((n,a)=>{if(a+1===e)return 6===a&&(r=1),`\n              <td\n                data-id='1/${this.state.dateInfo.month}/${this.state.dateInfo.year}'\n                data-today='${this.state.now.getFullYear()===this.state.dateInfo.year&&this.state.now.getMonth()===this.state.dateInfo.month&&1===this.state.now.getDate()?"today":""}'\n                class="table-calendar__cell_currentMonth"\n              >\n              <a class='${`${String(this.state.dateInfo.year)}/${String(this.state.dateInfo.month)}/1`in t?"tasks-exists":""}' href="/otus--homework--19/tasks?year=${this.state.dateInfo.year}&month=${this.state.dateInfo.month}&day=1" >1</a>\n              </td>\n            `;let o;return o=a+1<e?new Date(this.state.dateInfo.year,this.state.dateInfo.month,1-(e-(a+1))):new Date(this.state.dateInfo.year,this.state.dateInfo.month,a+1-e+1),i=o.getDate(),6===a&&(r=i),`\n              <td\n                data-id='${i}/${o.getMonth()+1}/${this.state.dateInfo.year}'\n                data-today='${this.state.now.getFullYear()===this.state.dateInfo.year&&this.state.now.getMonth()===this.state.dateInfo.month&&this.state.now.getDate()===i&&this.state.now.getMonth()===o.getMonth()?"today":""}'\n                class='${o.getMonth()!==this.state.dateInfo.month?"table-calendar__cell_anotherMonth":"table-calendar__cell_currentMonth"}'\n              >\n              <a class='${`${String(o.getFullYear())}/${String(o.getMonth())}/${String(i)}`in t?"tasks-exists":""}' href="/otus--homework--19/tasks?year=${o.getFullYear()}&month=${o.getMonth()}&day=${o.getDate()}" >${i}</a>\n              </td>\n            `})):[...Array(7)].map((()=>{r+=1;const e=new Date(this.state.dateInfo.year,this.state.dateInfo.month,r),n=e.getDate();return`\n            <td\n              data-id='${n}/${e.getMonth()+1}/${this.state.dateInfo.year}'\n              data-today='${this.state.now.getFullYear()===this.state.dateInfo.year&&this.state.now.getMonth()===e.getMonth()&&this.state.now.getDate()===n?"today":""}'\n              class='${e.getMonth()!==this.state.dateInfo.month?"table-calendar__cell_anotherMonth":"table-calendar__cell_currentMonth"}'\n            >\n              <a class='${`${String(e.getFullYear())}/${String(e.getMonth())}/${String(n)}`in t?"tasks-exists":""}' href="/otus--homework--19/tasks?year=${e.getFullYear()}&month=${e.getMonth()}&day=${e.getDate()}" >${n}</a>\n            </td>\n          `}));const s=`<tr>${o.join("")}</tr>`;n.push(s)}const a=`\n      <thead>\n        <tr>\n          ${u.map((t=>`<th>${t}</th>`)).join("")}\n        </tr>\n      </thead>\n    `,o=`<tbody>${n.join("")}</tbody>`;return`\n    <div class="calendar">\n      <div class="calendar__checkbox checkbox-completed">        \n          <label class="checkbox-completed__container">Show completed\n          <input class="checkbox-completed__input" type="checkbox" ${this.state.completed?"checked":""}>\n          <span class="checkmark"></span>\n        </label></a>                \n      </div> \n      <div class="legend" >\n        <p><span class="today"></span>&nbsp;- today</p>\n        <p><span class="task-exist"></span>&nbsp;- tasks exist</p>\n      </div>     \n      <div class="calendar__header header-calendar">        \n        <a class="header-calendar__arrow-left" href="/otus--homework--19/calendar?year=${0!==this.state.dateInfo.month?this.state.dateInfo.year:this.state.dateInfo.year-1}&month=${0!==this.state.dateInfo.month?this.state.dateInfo.month-1:11}" >&larr;</a>\n        <div class="header-calendar__title">\n          ${l[this.state.dateInfo.month]} ${this.state.dateInfo.year}\n        </div>\n        <a class="header-calendar__arrow-right" href="/otus--homework--19/calendar?year=${11!==this.state.dateInfo.month?this.state.dateInfo.year:this.state.dateInfo.year+1}&month=${11!==this.state.dateInfo.month?this.state.dateInfo.month+1:0}" >&rarr;</a>        \n      </div>\n      <table class="calendar__table table-calendar">\n        ${a}\n        ${o}\n      </table>\n    </div>`}}const pe={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let ye;const ve=new Uint8Array(16);function be(){if(!ye&&(ye="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ye))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ye(ve)}const me=[];for(let t=0;t<256;++t)me.push((t+256).toString(16).slice(1));const ge=function(t,e,n){if(pe.randomUUID&&!e&&!t)return pe.randomUUID();const r=(t=t||{}).random||(t.rng||be)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=r[t];return e}return function(t,e=0){return(me[t[e+0]]+me[t[e+1]]+me[t[e+2]]+me[t[e+3]]+"-"+me[t[e+4]]+me[t[e+5]]+"-"+me[t[e+6]]+me[t[e+7]]+"-"+me[t[e+8]]+me[t[e+9]]+"-"+me[t[e+10]]+me[t[e+11]]+me[t[e+12]]+me[t[e+13]]+me[t[e+14]]+me[t[e+15]]).toLowerCase()}(r)};function _e(t,e,n){return{id:ge(),text:t.replace(/[<>]/gi,""),tags:e.split(",").map((t=>t.trim().toLowerCase())),status:!1,dateOfExecution:new Date(n.year,n.month,n.day,n.hours||0,n.minutes||0).toISOString()}}class we extends i{handleClickCancel=()=>{this.el.innerHTML=""};handleClickUpdateTask=async()=>{const t=this.el.querySelector(".body-modal-update__input").value.replace(/[<>]/gi,"");this.state.updateTask(this.state.id,t)};events={"click@.footer-content-modal__button-cancel":this.handleClickCancel,"click@.footer-content-modal__button-update":this.handleClickUpdateTask};render(){return`\n      <div class="app__modal-backdrop"></div>\n      <div class='app__modal-wrapper modal-wrapper'>\n        <div class="modal-wrapper__modal modal ">\n          <div class="modal__content content-modal">\n            <div class="content-modal__header">\n              <h3 class="content-modal__header_title">Update the task</h3>\n            </div>\n            <div class='content-modal__body body-modal body-modal-update'>               \n              <label>Make changes</label>\n              <input class='body-modal-update__input _input' value="${this.state.text}" required/>\n            </div>\n            <div class="content-modal__footer footer-content-modal">\n              <button class="footer-content-modal__button-update _button">\n                Update\n              </button>                            \n              <button class="footer-content-modal__button-cancel _button">\n                Cancel\n              </button>            \n            </div>\n          </div>\n        </div>\n      </div>\n   `}}class ke extends i{handleClickCancel=()=>{this.el.innerHTML=""};handleClickCreateTask=async t=>{t.preventDefault();const e=t.target.elements;if(/^$|^([а-яёА-ЯЁa-zA-Z0-9\s]+\s?)$|^([а-яёА-ЯЁa-zA-Z0-9\s]+,\s?)+/.test(e.tags.value))this.state.createTask(e.description.value,e.tags.value,e.hours.value,e.minutes.value);else{const t=this.el.querySelector(".body-modal__error-message");t&&(t.style.display="block")}};events={"click@.footer-content-modal__button-cancel":this.handleClickCancel,"submit@.body-modal-create":this.handleClickCreateTask};render(){return'\n      <div class="app__modal-backdrop"></div>\n         <div\n           class=\'app__modal-wrapper modal-wrapper\'\n         >\n           <div class="modal-wrapper__modal modal ">\n             <div\n               class="modal__content content-modal"\n             >\n               <div class="content-modal__header">\n                 <h3 class="content-modal__header_title">Add task</h3>\n               </div>\n               <form id="createForm" class=\'content-modal__body body-modal body-modal-create\'>\n                   <label class=\'body-modal-create__label\'>Describe</label>\n                   <input name="description" class=\'body-modal-create__input_type_create _input\' required/>\n                   <br/>\n                   <label class=\'body-modal-create__label\'>Complete (hours)</label>\n                   <input name="hours" class=\'body-modal-create__input_type_create-hours _input\' type="number" step="1" value="0" min="0" max="23" required/>\n                   <br/>\n                   <label class=\'body-modal-create__label\'>Complete (minutes)</label>\n                   <input name="minutes" class=\'body-modal-create__input_type_create-minutes _input\' type="number" step="1" value="0" min="0" max="59" required/>\n                   <br/>                   \n                   <label class=\'body-modal-create__label\'>Tags</label>\n                   <input name="tags" class=\'body-modal-create__input_type_tags _input\' placeholder=\'Tags, enter a comma\'/> \n                   <p class=\'body-modal__message\'>Tags are displayed when you hover the mouse cursor over the task text</p>                 \n                   <p class=\'body-modal__error-message\'>The tag field may be blank or filled out as required</p>\n               </form>\n               <div class="content-modal__footer footer-content-modal">\n                 <button form="createForm" class="footer-content-modal__button-create _button" type="submit" >\n                     Add\n                   </button>              \n                   <button class="footer-content-modal__button-cancel _button">\n                   Cancel\n                 </button>            \n               </div>\n             </div>\n           </div>\n         </div>\n      '}}class Oe extends i{constructor(...t){super(...t),this.state.eventBus.once("initialLoad",(()=>{this.setState({tasks:de.getState().tasks})}))}handleFormSubmit=t=>{t.preventDefault();const e=t.target.elements;if(e.text.value.includes("&"))return e.text.value="",void(e.text.placeholder="Do not enter - &. Everything will break!");const n=this.state.searchTasks(e.text.value,de.getState().search.currentTasks);de.dispatch(se({flag:!0,tasks:n,value:e.text.value})),this.setState({})};handleClickDeleteTask=async t=>{const{id:e}=t.target.dataset;e&&(await this.state.storage.delete(e),de.dispatch(te(e)),de.getState().search.flag&&de.dispatch(le(e)),this.setState({}))};handleClickStatusTask=async t=>{const{id:e}=t.target.dataset;e&&(await this.state.storage.update(e,"",t.target.checked),de.dispatch(Zt({id:e,data:t.target.checked})))};handleClickUpdateTask=async t=>{const{id:e}=t.target.dataset;if(e){const t=this.el.querySelector(".modals"),n=this.el.querySelector(`[data-taskText='${e}']`);new we(t,{id:e,text:n.textContent,updateTask:this.updateTask})}};updateTask=async(t,e)=>{await this.state.storage.update(t,e),de.dispatch(Zt({id:t,data:e})),de.dispatch(ce()),this.setState({})};handleClickCreateTask=async()=>{const t=this.el.querySelector(".modals");new ke(t,{createTask:this.createTask})};createTask=async(t,e,n,r)=>{const a={year:Number(this.state.dateInfo.year),month:Number(this.state.dateInfo.month),day:Number(this.state.dateInfo.day),hours:Number(n),minutes:Number(r)},o=_e(t,e,a);await this.state.storage.createTask(o,a),de.dispatch(Qt(o)),de.getState().completed&&de.dispatch(ae()),de.dispatch(ce()),this.setState({})};handleClickShowCompleted=async()=>{de.dispatch(ae()),this.setState({})};events={"submit@.form-search-tasks":this.handleFormSubmit,"click@.delete__button":this.handleClickDeleteTask,"click@.status__input":this.handleClickStatusTask,"click@.update__button":this.handleClickUpdateTask,"click@.tasks__button-create-task":this.handleClickCreateTask,"click@.checkbox-completed__input":this.handleClickShowCompleted};render(){let t=fe(de.getState());const{completed:e,search:n}=de.getState();if(n.flag){const{findTasks:r}=n;t=e?r.filter((t=>t.status===e)):r}else de.dispatch(ue(t));let r,a=!1;this.state.showAll?r="All tasks!":(t=t.filter((t=>{const e=new Date(t.dateOfExecution);return this.state.dateInfo.year===e.getFullYear()&&this.state.dateInfo.month===e.getMonth()&&this.state.dateInfo.day===e.getDate()})),a=this.state.now.getTime()-new Date(this.state.dateInfo.year,this.state.dateInfo.month,this.state.dateInfo.day,23,59,59,999).getTime()>0,r=`${Xt(this.state.dateInfo.day)}.${Xt(this.state.dateInfo.month+1)}.${this.state.dateInfo.year}`);const o=!!t.length,i=`${t.map(((t,e,n)=>{let r="";const a=new Date(t.dateOfExecution),o=`${Xt(a.getDate())}.${Xt(a.getMonth()+1)}.${a.getFullYear()} ${Xt(a.getHours())}:${Xt(a.getMinutes())}`;return r=`<li class="tasks__task task task-${t.id}"'>\n                  <div class="task__text text-task" title='Tags - ${t.tags.join(", ")}' data-taskText='${t.id}'>${t.text}</div>\n                  <div class="task__options task__options_type_status status"><input class="status__input" type="checkbox" ${t.status?"checked":""} data-id='${t.id}'/></div>\n                  <div class="task__options task__options_type_update update">              \n                    <button class="update__button _task-button" data-id='${t.id}'></button></div>\n                  <div class="task__options task__options_type_delete delete"><button class="delete__button _task-button" data-id='${t.id}'></button></div>\n                  <div class="task__dateOfExecution task__dateOfExecution_value">${o}</div>\n                </li>${e===n.length-1?"<hr/>":""}`,r})).join("")}`;return`          \n    <div class='tasks _container'> \n      <div class="tasks-date" >Date: ${r}</div>       \n       ${o?'<form class=\'tasks__form-search form-search-tasks\'>\n        <input name="text" class=\'form-search-tasks__input _input\' required/>\n        <button name="button" class="form-search-tasks__button _button" type="submit">Find the task</button>              \n      </form>':""}\n       ${n.flag?`<p class='tasks__search-message'>Search: &laquo;${n.value}&raquo;.     Found: ${t.length} task${1===t.length?"":"s"}.</p>`:""}     \n      <div class="tasks__checkbox checkbox-completed" >\n        <label class="checkbox-completed__container">Show completed\n          <input class="checkbox-completed__input" type="checkbox" ${e?"checked":""}>\n          <span class="checkmark"></span>\n        </label>       \n      </div>               \n      <ol class="tasks-container">\n        <li class="tasks__task task task-header">\n          <div class="task__text">Task description</div>\n          <div class="task__options task__options_type_status">Status</div>\n          <div class="task__options task__options_type_update">Change</div>\n          <div class="task__options task__options_type_delete">Remove</div>\n          <div class="task__dateOfExecution">Date of execution</div>\n        </li><hr/>\n      ${i}\n      </ol>\n      ${a||this.state.showAll?"":"\n          <button class='tasks__button-create-task _button' >Create a task</button>"}     \n    </div>\n    <section class="modals" ></section>  \n    `}}const Se=n.p+"images/spongebob.jpg";class Pe extends i{constructor(...t){super(...t),this.state.eventBus.once("initialLoad",(()=>{this.setState({})}))}handleClickGithub=t=>{window.open("https://github.com/Djess-V/otus--homework--19")};events={"click@.github":this.handleClickGithub};render(){return`      \n        <div class="modal-wrapper__modal modal ">\n          <div\n            class="modal__content content-modal"\n          >\n            <div class="content-modal__header">\n              <h2 class="content-modal__header_title">About</h2>                           \n            </div>\n            <div class='content-modal__body body-modal body-modal-about'>\n                <img src=${Se} alt="SpongeBob" width="148px" height="180px" />\n                <table>\n                  <tr>\n                    <td>Title:</td>\n                    <td>My Calendar</td>\n                  </tr>\n                  <tr>\n                    <td>Author:</td>\n                    <td>Djess-V</td>\n                  </tr>\n                  <tr>\n                    <td>GitHub:</td>\n                    <td><span class="github" >https://github.com/Djess-V/otus--homework--19</span></td>\n                  </tr>\n                </table>                \n            </div>\n            <div class="content-modal__footer footer-content-modal footer-modal-about">\n              <h3>Description</h3>\n              <p>The application provides the following pages: Calendar, Tasks, About. All views allow you to create, edit, delete tasks (title, description, progress status, date), filter by progress status, do a fuzzy search. The status is displayed on the url (you can save it to bookmarks).</p>       \n            </div>\n          </div>\n        </div>\n      \n    `}}class je{dbName="";tasks=[];constructor(t){this.dbName=t}createStorage=async()=>{if(this.tasks=await this.readFromStorage(),0===this.tasks.length){const t=new Date,e={year:t.getFullYear(),month:t.getMonth(),day:t.getDate(),hours:t.getHours(),minutes:t.getMinutes()};this.tasks.push(_e("First task","task",e)),this.saveInStorage(this.tasks)}return this.tasks};fetchAll=async()=>(this.tasks=await this.readFromStorage(),this.tasks);createTask=async t=>(this.tasks=await this.readFromStorage(),this.tasks=Gt(t,this.tasks),await this.saveInStorage(this.tasks),this.tasks);delete=async t=>(this.tasks=await this.readFromStorage(),this.tasks=this.tasks.filter((e=>e.id!==t)),await this.saveInStorage(this.tasks),this.tasks);update=async(t,e,n)=>(this.tasks=await this.readFromStorage(),this.tasks=this.tasks.map((r=>(r.id===t&&(e&&(r.text=e.replace(/[<>]/gi,"")),(n||!1===n)&&(r.status=n)),r))),await this.saveInStorage(this.tasks),this.tasks);async saveInStorage(t){localStorage.setItem(this.dbName,JSON.stringify(t))}readFromStorage=async()=>{try{const t=localStorage.getItem(this.dbName);return t?JSON.parse(t):[]}catch(t){return[]}}}class Ee extends i{constructor(...t){super(...t),this.state.eventBus.once("initialLoad",(()=>{this.setState({})}))}render(){return`\n      <div class="header__container header-container _container" >         \n        <a class="header-container__title" href='/' >My Calendar</a>              \n        <nav class="header-container__nav nav-header" >\n          <a class="nav-header__link ${"calendar"===this.state.link?"nav-header__link_active":""}" href='/calendar?year=${this.state.year}&month=${this.state.month}' >CALENDAR</a>\n          <a class="nav-header__link ${"tasks"===this.state.link&&this.state.showAll?"nav-header__link_active":""}" href='/tasks?all=1' >ALL TASKS</a>\n          <a class="nav-header__link ${"about"===this.state.link?"nav-header__link_active":""}" href='/about' >ABOUT</a>          \n        </nav>\n      </div>\n    `}}const xe=document.getElementById("app");xe&&async function(e){const n=new je("@djess-v/my-calendar"),a=new(o());await async function(){await n.createStorage();const t=await n.fetchAll();de.dispatch(ee(t)),a.emit("initialLoad")}();const i=new Date,{month:u,year:l,day:d}=Kt(i),f=new t.Router;function h(t,e){let n=[...e];return n=new r(n,["text"]).search(t),n}function p(){e.querySelectorAll("a").forEach((t=>{t.href=`/otus--homework--19${t.pathname}${t.search}`}))}f.on(/\/$/,{onEnter:(...t)=>{new s(e,{eventBus:a});const n=e.querySelector(".header");new Ee(n,{month:u,year:l,day:d,eventBus:a});const r=e.querySelector(".main");new c(r,{eventBus:a}),p()},onLeave:()=>{a.detach("initialLoad")}}),f.on(/\/calendar(.+)?/,{onEnter:(...t)=>{let n=Kt(i);const{tasks:r,completed:o}=de.getState();"month"in t[0].state&&"year"in t[0].state&&(n=Kt(i,t[0].state)),new s(e,{eventBus:a});const c=e.querySelector(".header");new Ee(c,{link:"calendar",month:u,year:l,eventBus:a}),p();const d=e.querySelector(".main");new he(d,{now:i,dateInfo:n,completed:o,tasks:r,eventBus:a})},onLeave:()=>{a.detach("initialLoad")}}),f.on(/\/tasks(.+)?/,{onEnter:(...t)=>{let r,o=!1;"all"in t[0].state&&(o=Boolean(Number(t[0].state.all))),r="month"in t[0].state&&"year"in t[0].state&&"day"in t[0].state?Kt(i,t[0].state):Kt(i),new s(e,{eventBus:a});const c=e.querySelector(".header");new Ee(c,{link:"tasks",showAll:o,month:u,year:l,eventBus:a}),p();const d=e.querySelector(".main");new Oe(d,{dateInfo:r,storage:n,now:i,eventBus:a,showAll:o,searchTasks:h})},onLeave:()=>{a.detach("initialLoad"),de.dispatch(ce())}}),f.on(/\/about/,{onEnter:(...t)=>{new s(e,{eventBus:a});const n=e.querySelector(".header");new Ee(n,{link:"about",month:u,year:l,eventBus:a}),p();const r=e.querySelector(".main");new Pe(r,{eventBus:a})},onLeave:()=>{a.detach("initialLoad")}})}(xe)}()}();